<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>flexPTP: Events and logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="large-top-height.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
</script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="flexPTP_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">flexPTP<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">An IEEE 1588 PTP implementation designed for microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('monitoring.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Events and logging </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the following flexPTP's detailed logging and monitoring features are described.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Logging</h1>
<p>The flexPTP library implements several kinds of automatic logging, that can be turned on and off using <a class="el" href="logging_8c.html#a8d85f9f4ac5038dc0902f11c0e2e3c72">ptp_log_enable()</a>. Predefined logging features are introduced below.</p>
<p>All of these logging features are available through the CLI command <code>ptp log {def|corr|ts|info|locked|bmca} {on|off}</code> as well.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Default logging</h2>
<p>ID: <code>PTP_LOG_DEF</code>, CLI: <code>def</code></p>
<h3><a class="anchor" id="autotoc_md35"></a>
Slave clock mode</h3>
<p>Definition: <a class="el" href="slave_8c.html">slave.c</a>, <a class="el" href="slave_8c.html#aafe19c39152756b0911651260674330a">ptp_perform_correction()</a></p>
<p>Each synchronization cycle (after the reception of a <code>Sync</code> message) the below several current clock and network state variables are getting printed.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadRight">Format    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>T1</b>   </td><td class="markdownTableBodyNone"><em>reception time of the <code>Sync</code> message corresponding to the current cycle</em>   </td><td class="markdownTableBodyRight">(s, ns): <code>%d %09d</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>T4</b>   </td><td class="markdownTableBodyNone"><em>reception time (by the master) of the last <code>Delay_Req</code> message</em>   </td><td class="markdownTableBodyRight">(s, ns): <code>%d %09d</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Î”t</b>   </td><td class="markdownTableBodyNone"><em>time error between us and the master (positive value means we're ahead of the master)</em>   </td><td class="markdownTableBodyRight">(s, ns), clock ticks: <code>%d %09d d</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>addend</b>   </td><td class="markdownTableBodyNone"><em>hardware clock addend</em>   </td><td class="markdownTableBodyRight">(no unit) <code>%u</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>corr_ppb</b>   </td><td class="markdownTableBodyNone"><em>relative clock tuning (correction) value in PPB</em>   </td><td class="markdownTableBodyRight">PPB: <code>%f</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>MPD</b>   </td><td class="markdownTableBodyNone"><em>network Mean Path Delay between us and the master</em>   </td><td class="markdownTableBodyRight">ns: <code>%ld</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>MSP</b>   </td><td class="markdownTableBodyNone"><em>measured <code>Sync</code> period</em>   </td><td class="markdownTableBodyRight">ns: <code>%%09lu</code>   </td></tr>
</table>
<p>A logging header gets also issued when this logging capability is turned on.</p>
<p><code>T1 [s] | T1 [ns] | T4 [s] | T4 [ns] | Dt [s] | Dt [ns] | Dt [tick] | addend | corr_ppb | mpd_ns | sync_period_ns</code></p>
<h4><a class="anchor" id="autotoc_md36"></a>
Example</h4>
<div class="fragment"><div class="line">1750245425 776292333 1750245425 331768083 0       -27 -4 4260879975 57.835724 3414 1000057519</div>
<div class="line">1750245426 776299212 1750245426 456768081 0         3 0 4260879881 -22.133024 3395 1000006879</div>
<div class="line">1750245427 776371852 1750245427 581767839 0        45 7 4260879708 -40.697857 3381 1000072640</div>
<div class="line">1750245428 776412971 1750245428 706767677 0       -19 -3 4260879921 50.216988 3380 1000041119</div>
<div class="line">1750245429 776659935 1750245428 706767677 0        21 3 4260879779 -33.560795 3380 1000246964</div>
<div class="line">1750245430 776686174 1750245429 831767675 0       -16 -2 4260879907 30.222692 3412 1000026239</div>
<div class="line">1750245431 776744493 1750245430 956767513 0         8 1 4260879826 -19.040367 3385 1000058319</div>
<div class="line">1750245432 776754491 1750245432 081767431 0        14 2 4260879794 -7.616276 3391 1000009998</div>
<div class="line">1750245433 776922094 1750245433 206767028 0        39 6 4260879679 -27.130424 3369 1000167603</div>
<div class="line">1750245434 776946172 1750245434 331767266 0       -92 -15 4260880170 115.426010 3436 1000024078</div>
<div class="line">1750245435 776998572 1750245435 456767104 0        75 12 4260879586 -137.089859 3359 1000052400</div>
<div class="line">1750245436 777026330 1750245436 581767582 0       -32 -5 4260879943 84.012680 3412 1000027758</div>
<div class="line">1750245437 777052969 1750245437 706766780 0        69 11 4260879566 -88.535973 3338 1000026639</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md37"></a>
Master clock mode</h3>
<p>Definition: <a class="el" href="master_8c.html">master.c</a>, <a class="el" href="master_8c.html#a50ba756ab7b29eb706f6faa4f7e56741">PTP_MASTER_P2P_SLAVE_STATE_LOG()</a>, <a class="el" href="master_8c.html#af9fe93fb1d3db8fe0c08fd7a8e3a5a19">ptp_master_commence_mpd_computation()</a></p>
<p>Print slave recognition states and Mean Path Delay values in any P2P mode.</p>
<p>Possible slave recognition state values:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">State   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NONE</code>   </td><td class="markdownTableBodyNone"><em>No suitable slave has been recognized</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CANDIDATE</code>   </td><td class="markdownTableBodyNone"><em>A slave has been responding consequently and qualification is in progress</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ESTABLISHED</code>   </td><td class="markdownTableBodyNone"><em>The slave clock has been accepted, a synchronization path has been established</em>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md38"></a>
Example</h4>
<div class="fragment"><div class="line">NONE -&gt; CANDIDATE</div>
<div class="line">CANDIDATE -&gt; ESTABLISHED</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
BMCA state transition logging</h2>
<p>ID: <code>PTP_LOG_BMCA</code>, CLI: <code>bmca</code></p>
<h3><a class="anchor" id="autotoc_md40"></a>
Master and Slave modes</h3>
<p>Definition: <a class="el" href="bmca_8c.html">bmca.c</a>, <a class="el" href="bmca_8c.html#a656e08271c88df6642947d8b418d69fb">SBMC_PRINT_LOG()</a></p>
<p>BMCA state transitions get printed. Possible states: <code>INITIALIZING</code>, <code>LISTENING</code>, <code>PRE_MASTER</code>, <code>MASTER</code>, <code>SLAVE</code>, <code>PASSIVE</code>, <code>UNCALIBRATED</code>, <code>FAULTY</code>, <code>DISABLED</code>. To learn more about the specific state definitions refer to the <a href="https://ieeexplore.ieee.org/document/9120376" target="_blank">IEEE 1588 Standard</a>.</p>
<h4><a class="anchor" id="autotoc_md41"></a>
Example:</h4>
<div class="fragment"><div class="line">INITIALIZING -&gt; LISTENING</div>
<div class="line">LISTENING -&gt; PRE_MASTER</div>
<div class="line">PRE_MASTER -&gt; MASTER</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
Timestamp logging</h2>
<p>ID: <code>PTP_LOG_TIMESTAMPS</code>, CLI: <code>ts</code></p>
<h3><a class="anchor" id="autotoc_md43"></a>
Slave mode</h3>
<p>Definition: <a class="el" href="slave_8c.html">slave.c</a>, <a class="el" href="slave_8c.html#aafe19c39152756b0911651260674330a">ptp_perform_correction()</a></p>
<p>Print timestamps of received and transmitted messages tagged with the sequence number of the current synchronization cycle.</p>
<h4><a class="anchor" id="autotoc_md44"></a>
E2E mode</h4>
<p>In E2E mode <b>four</b> timestamps get printed in each synchronization cycle, e.g.:</p>
<div class="fragment"><div class="line">seqID: 26</div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>: 1750245349.770584019 &lt;- Sync TX (master)</div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a259c2993ee45e06a4ea8150451a7a70e">T2</a>: 1750245349.770584664 &lt;- Sync RX (slave) </div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a5d800c5f04f8638061876b9e32c6c508">T3</a>: 1750245348.831767544 &lt;- Del_Req TX (slave) </div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a935a699e9bf1bffc5dad8738d3cd24c0">T4</a>: 1750245348.831776389 &lt;- Del_Req RX (master)</div>
<div class="ttc" id="aptp__sync__cycle__data_8h_html_a259c2993ee45e06a4ea8150451a7a70e"><div class="ttname"><a href="ptp__sync__cycle__data_8h.html#a259c2993ee45e06a4ea8150451a7a70e">T2</a></div><div class="ttdeci">#define T2</div><div class="ttdef"><b>Definition:</b> <a href="ptp__sync__cycle__data_8h_source.html#l00031">ptp_sync_cycle_data.h:31</a></div></div>
<div class="ttc" id="aptp__sync__cycle__data_8h_html_a5d800c5f04f8638061876b9e32c6c508"><div class="ttname"><a href="ptp__sync__cycle__data_8h.html#a5d800c5f04f8638061876b9e32c6c508">T3</a></div><div class="ttdeci">#define T3</div><div class="ttdef"><b>Definition:</b> <a href="ptp__sync__cycle__data_8h_source.html#l00032">ptp_sync_cycle_data.h:32</a></div></div>
<div class="ttc" id="aptp__sync__cycle__data_8h_html_a935a699e9bf1bffc5dad8738d3cd24c0"><div class="ttname"><a href="ptp__sync__cycle__data_8h.html#a935a699e9bf1bffc5dad8738d3cd24c0">T4</a></div><div class="ttdeci">#define T4</div><div class="ttdef"><b>Definition:</b> <a href="ptp__sync__cycle__data_8h_source.html#l00033">ptp_sync_cycle_data.h:33</a></div></div>
<div class="ttc" id="aptp__sync__cycle__data_8h_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="ptp__sync__cycle__data_8h.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="ptp__sync__cycle__data_8h_source.html#l00030">ptp_sync_cycle_data.h:30</a></div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md45"></a>
P2P mode</h4>
<p>In P2P mode <b>six</b> timestamps get printed in each synchronization cycle, e.g.:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>: 1750244937.371576883 &lt;- Sync TX (master)</div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a259c2993ee45e06a4ea8150451a7a70e">T2</a>: 1750244937.371583093 &lt;- Sync RX (slave)</div>
<div class="line">t1: 1750244936.716173459 &lt;- PDel_Req TX (our clock)</div>
<div class="line">t2: 1750244936.716174083 &lt;- PDel_Req RX (their clock)</div>
<div class="line">t3: 1750244936.716270563 &lt;- PDel_Resp TX (their clock)</div>
<div class="line">t4: 1750244936.716276743 &lt;- PDel_Resp RX (our clock)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md46"></a>
Master P2P mode</h3>
<p>Definition: <a class="el" href="master_8c.html">master.c</a>, <a class="el" href="master_8c.html#af9fe93fb1d3db8fe0c08fd7a8e3a5a19">ptp_master_commence_mpd_computation()</a></p>
<p>In master mode the four Peer-Delay Mechanism-related timestamps are printed along the relevant correction fields, e.g.:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>: 1750245156.806319789 &lt;- PDelay_Req TX (master)</div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a259c2993ee45e06a4ea8150451a7a70e">T2</a>: 1750245156.806323241 &lt;- PDelay_Req RX (slave) </div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a5d800c5f04f8638061876b9e32c6c508">T3</a>: 1750245156.806762292 &lt;- PDelay_Resp TX (slave) </div>
<div class="line"><a class="code hl_define" href="ptp__sync__cycle__data_8h.html#a935a699e9bf1bffc5dad8738d3cd24c0">T4</a>: 1750245156.806765637 &lt;- PDelay_Resp RX (master)</div>
<div class="line">    000000000 -- 000000000 &lt;- CF in PDelay_Resp and ..._Follow_Up</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
Correction fields logging</h2>
<p>ID: <code>PTP_LOG_CORR_FIELD</code>, CLI: <code>corr</code></p>
<h3><a class="anchor" id="autotoc_md48"></a>
Slave mode</h3>
<p>Definition: <a class="el" href="slave_8c.html">slave.c</a>, <a class="el" href="slave_8c.html#a591f9730a29b5536e2590e3689a813fe">ptp_slave_process_message()</a></p>
<p>The correction fields of <code>Follow_Up</code>, <code>Delay_Resp</code>, <code>PDelay_Resp</code> and <code>PDel_Resp_Follow_Up</code> are printed.</p>
<h4><a class="anchor" id="autotoc_md49"></a>
Example</h4>
<div class="fragment"><div class="line">C [Follow_Up]: 000238277</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md50"></a>
Info notifications</h2>
<p>ID: <code>PTP_LOG_INFO</code>, CLI: <code>info</code></p>
<h3><a class="anchor" id="autotoc_md51"></a>
Slave mode</h3>
<p>Definition: <a class="el" href="slave_8c.html">slave.c</a>, <a class="el" href="slave_8c.html#aafe19c39152756b0911651260674330a">ptp_perform_correction()</a></p>
<p>The user gets notified of unexpected events occurred and exceptions.</p>
<h4><a class="anchor" id="autotoc_md52"></a>
Example</h4>
<div class="fragment"><div class="line">Time difference has exceeded the coarse correction threshold [-1652684253ns], executing coarse correction!</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md53"></a>
Clock has locked in our out notification</h2>
<p>ID: <code>PTP_LOG_LOCKED_STATE</code>, CLI: <code>locked</code></p>
<h3><a class="anchor" id="autotoc_md54"></a>
Slave mode</h3>
<p>Definition: <a class="el" href="stats_8c.html">stats.c</a>, <a class="el" href="stats_8c.html#a8d09d27b8413f11a8996ed2b5494d0da">ptp_collect_stats()</a></p>
<p>The user gets notified of changes in the clock's accuracy. The clock is considered <code>LOCKED</code> if the filtered time error is less than PTP_ACCURACY_LIMIT_NS.</p>
<h4><a class="anchor" id="autotoc_md55"></a>
Example</h4>
<div class="fragment"><div class="line">PTP LOCKED!</div>
<div class="line">PTP DIVERGED!</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md56"></a>
User events</h1>
<p>The flexPTP enables the user to register a callback function that gets invoked whenever one of the following events occur in the core:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_INIT_DONE</code>   </td><td class="markdownTableBodyNone">The flexPTP core has been initialized.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_RESET_DONE</code>   </td><td class="markdownTableBodyNone">The flexPTP module has been reset.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_SYNC_RECVED</code>   </td><td class="markdownTableBodyNone">A Sync message has been received (slave)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_SYNC_SENT</code>   </td><td class="markdownTableBodyNone">A Sync message has eebn sent (master)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_FOLLOW_UP_RECVED</code>   </td><td class="markdownTableBodyNone">A Follow_Up message has been received (slave)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_DELAY_REQ_RECVED</code>   </td><td class="markdownTableBodyNone">A Delay_Req had been received (master)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_DELAY_REQ_SENT</code>   </td><td class="markdownTableBodyNone">A Delay_Req had been sent (slave)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_DELAY_RESP_RECVED</code>   </td><td class="markdownTableBodyNone">A Delay_Resp had been received (slave)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_DELAY_RESP_SENT</code>   </td><td class="markdownTableBodyNone">A Delay_Resp had been sent (master)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_PDELAY_REQ_RECVED</code>   </td><td class="markdownTableBodyNone">A PDelay_Req had been received (master/slave)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_PDELAY_REQ_SENT</code>   </td><td class="markdownTableBodyNone">A PDelay_Req had been sent (master/slave)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_PDELAY_RESP_RECVED</code>   </td><td class="markdownTableBodyNone">A PDelay_Resp had been received (master/slave)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_PDELAY_RESP_SENT</code>   </td><td class="markdownTableBodyNone">A PDelay_Resp had been sent (master/slave)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_PDELAY_RESP_FOLLOW_UP_RECVED</code>   </td><td class="markdownTableBodyNone">A PDelay_Resp_Follow_Up had been received (master/slave)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_ANNOUNCE_SENT</code>   </td><td class="markdownTableBodyNone">An Announce message has been sent (master)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_ANNOUNCE_RECVED</code>   </td><td class="markdownTableBodyNone">An Announce message has been received (master/slave)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_LOCKED</code>   </td><td class="markdownTableBodyNone">The average clock accuracy is sufficient.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_UNLOCKED</code>   </td><td class="markdownTableBodyNone">Our clock has deviated from the master in average.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_BMCA_STATE_CHANGED</code>   </td><td class="markdownTableBodyNone">The BMCA state has changed.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>PTP_UEV_NETWORK_ERROR</code>   </td><td class="markdownTableBodyNone">Indication of lost messages or the absence of expected responses.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PTP_UEV_QUEUE_ERROR</code>   </td><td class="markdownTableBodyNone">This event signals that the flexPTP's internal transmission output queue is full and blocked.   </td></tr>
</table>
<p>The callback function can be hooked into flexPTP either by calling <a class="el" href="ptp__core_8c.html#a8c5a3c700b5c8e29e2a839a770409d9f">ptp_set_user_event_callback()</a> in runtime or by defining the PTP_USER_EVENT_CALLBACK macro in compile time. PTP_UEV_INIT_DONE can only be caught if the latter method is used.</p>
<h1><a class="anchor" id="autotoc_md57"></a>
Statistics</h1>
<p>The flexPTP library collects runtime statistics. Currently two fields are implemented in the <a class="el" href="struct_ptp_stats.html" title="Structure for statistics.">PtpStats</a> structure:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>filtTimeErr</code>   </td><td class="markdownTableBodyNone"><em>0.1 Hz IIR low-pass filtered time error</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>locked</code>   </td><td class="markdownTableBodyNone">_indicates if the filtered time error is less than PTP_ACCURACY_LIMIT_NS   </td></tr>
</table>
<p>Statistics can be queried using <a class="el" href="stats_8c.html#a8f2357994f632a74e26b61ae7ba3fb69">ptp_get_stats()</a>. Learn more in <a class="el" href="stats_8h.html" title="This is the statistics module that gathers data of the operating PTP-engine.">stats.h</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
